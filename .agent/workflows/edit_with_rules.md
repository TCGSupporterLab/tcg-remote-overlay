---
description: プロジェクトルールを再確認し、指示された範囲のみを正確に編集する
---

このワークフローは、ユーザーが `/edit_with_rules` コマンドを使用した場合、または厳格なルール遵守が必要な編集の際に適用されます。

1. **ルールの再確認**: 編集を開始する前に、必ず `.agent/rules/` ディレクトリ内のすべての `.md` ファイルを読み直し、プロジェクト固有の制約を再認識してください。
2. **指示の厳密な分離（最新の指示への集中）**: **今回のプロンプト（`/edit_with_rules` と共に送信されたメッセージ）に含まれる指示のみ**を履行の対象としてください。過去の未完了タスクを勝手に再開したり、指示に含まれていない作業を「前回の流れ」で行うことは厳禁です。
3. **コンテキストの知的な活用（参照は可、実行は不可）**: 過去の試行錯誤や失敗、議論の内容は、**「今回の指示」をより正確にこなすための知見**としてのみ活用してください（例：前回の失敗を繰り返さない、過去に決定した作法に従うなど）。
4. **指示範囲の特定**: ユーザーの依頼内容から「修正が必要な最小限の範囲」を正確に抽出します。指示されていない変更（リファクタリング、デザイン調整、タイポ修正、過去に却下・中断された機能の再実装など）を含まないように徹底してください。
5. **「良かれと思って」の排除**: たとえそれがコードベースの品質を向上させると信じたとしても、指示外の変更は一切行わないでください。
6. **段階的な適用**: 複数の修正がある場合、一つ一つのステップがプロジェクトルール（例：tailwindの使用、ログの運用）に準拠しているか確認しながら進めます。
7. **完了報告時の自己検証**: 修正が完了した際、指示された範囲を超えていないか、またルールを逸脱していないかを再度確認し、その結果をユーザーに伝えてください。

※ このワークフローが明示的に使用されない場合でも、プロジェクトルールを遵守することはエージェントの義務です。
