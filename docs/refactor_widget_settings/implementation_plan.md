# 実装計画: ウィジェット設定のリファクタリング

## 背景
これまで `useCardSearch` フックがカード検索だけでなく、ダイス、コイン、ライフ計算機、SPマーカーなどのウィジェットの表示状態管理も兼ねていました。これを疎結合にするため、ウィジェット専用の管理フックに分離し、コンポーネント名もより汎用的な名称に変更します。

## 変更方針

### 1. フックの分離
- **`useWidgetSettings`**: 汎用的なウィジェット（ダイス、コイン、ライフ計算機、カードウィジェット）の表示状態と、ライフ計算機の初期値などの設定を管理します。
- **`useSPMarkerState`**: SPマーカー（ホロライブ用）の表示状態、表面/裏面の状態を管理します。
- **`useCardSearch`**: 純粋にカードの検索、フィルタリング、ピン留め機能に集中させます。

### 2. コンポーネントの整理
- 今後ライフ計算機以外のウィジェットが増える可能性を考慮し、設定メニューのセクション名は「遊戯王」「ホロライブ」を維持します。
- `YugiohTools` 本体は機能実態に合わせて `LPCalculator` にリネームしますが、それを包含するセクションコンポーネントは `YugiohSection` とします。

### 3. ステート同期と永続化
- `localStorage` を使用した永続化。
- `BroadcastChannel` (名称: `tcg_remote_widget_settings`, `tcg_remote_sp_marker`) を使用したタブ間同期。

## 依存関係への影響
- `App.tsx` が中心となって各フックを呼び出し、必要なプロップスを `SettingsMenu` や各ウィジェットコンポーネントに分配します。
- `useCardSearch` の戻り値からウィジェット関連のプロパティが消えるため、参照箇所をすべて修正します。

## 確認項目
1. ウィジェットの表示切り替えが全タブで即座に反映されるか。
2. ライフ計算機の初期値設定が保持されるか。
3. SPマーカーの面状態が同期されるか。
4. TypeScriptの型定義に矛盾がないか。
