# 修正内容の確認 (Walkthrough)

ウィジェット設定の管理構造を刷新し、ロジックの分離と名称の整理を行いました。

## 主な変更点

### 1. 新しい管理フックの導入
- **`src/hooks/useWidgetSettings.ts`**
  - ダイス、コイン、ライフ計算機、カードウィジェットの表示状態を一括管理。
  - 初期ライフポイント設定、Player1のみ表示設定を統合。
- **`src/hooks/useSPMarkerState.ts`**
  - SPマーカーの表示、面（表/裏）、強制非表示状態を管理。

### 2. `useCardSearch.ts` の軽量化
- 検索に無関係なステートをすべて削除し、コードの可読性と保守性を向上させました。
- `SharedState` からウィジェット関連のプロパティを排除しました。

### 3. 名称の整理 (Rename)
- **コンポーネント**: `YugiohTools` -> `LPCalculator`
  - ファイル名および内部の型定義も併せて更新しました。
- **設定メニュー**:
  - 今後の拡張性を見据え、セクション名は元の「遊戯王」「ホロライブ」に復元しました。
  - 内部コンポーネント名も `YugiohSection`, `HololiveSection` としました。

### 4. `App.tsx` の統合
- `useWidgetSettings` と `useSPMarkerState` を導入し、`SettingsMenu` や各種ウィジェットに新しいステートとセッターを渡すように更新しました。
- 旧 `setIsLPVisible` などの関数名を `setLPVisible` に統一し、呼び出し側のコールバックも修正しました。

## 動作確認結果
- [x] **永続化**: ブラウザをリロードしてもウィジェットの表示状態や初期ライフ設定が保持される。
- [x] **同期**: 操作タブでウィジェットを非表示にすると、オーバーレイ表示中の別タブでも即座に非表示になる。
- [x] **機能性**: ライフ計算機の加減算や、SPマーカーのクリックによる反転機能が正常に動作し、同期される。
- [x] **型安全性**: 全ファイルで TypeScript のコンパイルエラー（赤い波線）がないことを確認済み。

## 開発者向けの注意点
今後、新しいウィジェット（例: ターンカウンターなど）を追加する場合は、`useWidgetSettings` にステートを追加することで、既存のパターン（永続化＋同期）を簡単に踏襲できます。
