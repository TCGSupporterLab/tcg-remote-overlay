# 共通ツール仕様

## 1. ダイスロール (3D Dice)
- **機能**: 1から6の数値をランダムに生成。暗号学的に安全な `window.crypto.getRandomValues()` を使用し、統計的な偏りを排除しています。
- **演出**: CSS 3D Transforms を使用したサイコロの回転アニメーション。同一の出目が連続した場合でも、必ずアニメーションが再生されるよう制御されています。
- **同期**: コントローラー側で振った結果の「出目」と「回転アニメーションの発火」がオーバーレイ側に同期されます。

## 2. コインタス (3D Coin)
- **機能**: 「表」または「裏」の結果をランダムに生成。ダイス同様、高精度の乱数生成アルゴリズムを採用しています。
- **演出**: コインが空中で回転する3Dアニメーション。
- **同期**: ダイスと同様に、結果とアニメーションがリアルタイムに共有されます。

## 3. デジタルディスプレイ (Digital Display)
- **用途**: オーバーレイ画面でのライフポイント表示。
- **デザイン**: 
    - 7セグメント風のフォントをベースにしたネオンエフェクト。
    - **透過モード対応**: 背景が透明や緑色になった際、数字が埋もれないよう数字の背後に半透明の保護色を配置。
    - **色分け**: P1は赤、P2は青のテーマカラーを維持。

## 4. UIコンポーネント
- **lucide-react**: 全体で一貫したアイコンセットを使用。
- **tailwindcss**: レスポンシブレイアウトとカラーテーマの管理。
## 5. 共通ショートカット (Keyboard Shortcuts)
| キー | 動作 | 備考 |
| :--- | :--- | :--- |
| `D` | ダイスを振る | |
| `C` | コインを振る | |
| `Shift + 0-9` | 表示カード切替 | 独立カードウィジェットの枚数(0-999)を指定。 |
| `Delete` | 選択中のウィジェットを非表示 | ウィジェットが1つ以上選択されている場合のみ有効。 |
| `.` (テンキー) | ダイスを振る | 遊戯王モードでは 350ms 以内の 2 回連続押下でコインに変化。 |
| `V` | 映像ソース切替 | OFF → Camera → Screen の順にトグル。 |
| `A` | 映像位置調整モード切替 | オーバーレイ窓上でのマウス操作が可能になります。 |

- **フォーカス制御**: いずれのショートカットも、テキスト入力欄（カード検索窓など）にフォーカスがある場合は無効化されます。
- **リピート防止**: キーの長押しによる意図しない連続実行（ダイスの連打など）を防止するガード機能が搭載されています。
