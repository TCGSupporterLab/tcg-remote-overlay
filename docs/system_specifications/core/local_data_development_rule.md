# ローカルカードデータ取得・更新ルール (Local Data Development Rule)

## 概要
`tools/` フォルダ内のスクリプトは、ホロライブのカード情報を取得・整理するための個人用・テスト用ツールです。
これらは本プロジェクトの配布物には含まれず、GitHub等にもアップロードされません。
これらを使用して `hololive-cards.json` を更新・修正する際は、公式サイトへの負荷を最小限に抑えるため、必ず「開発モード」を使用してください。

## 対象ファイル
以下のファイル、およびこれに関連するデータパース・保存ロジックを変更する場合が対象となります。
- `tools/fetch-hololive-data.js`
- `tools/download-images.js`
- `tools/enrich-cards.js`
- `tools/download-type-icons.js`
- `src/data/hololive-cards.json` (直接編集または構造変更時)

## 開発モードの使用手順
`fetch-hololive-data.js` を実行する際は、環境変数 `DEV=true` を付与して実行し、ローカルキャッシュ（`tools/cache/hololive/`）を利用してください。

### 実行コマンド例
- **PowerShell**: `$env:DEV="true"; node tools/fetch-hololive-data.js`
- **Cmd**: `set DEV=true&& node tools/fetch-hololive-data.js`

## ルール適用基準
1. **ロジック修正後の初回テスト**: 解析ロジック（セレクタの変更、新フィールドの追加等）を変更した後の動作確認は、必ずキャッシュを用いて行います。
2. **データの整合性確認**: 取得件数の不一致や順序の変更など、意図しないデータ破壊を防ぐための検証にも開発モードを用います。
3. **不要なアクセス禁止**: データの加工（かな変換や画像パス修正など）のみが目的で、公式サイトから最新情報を取得する必要がない場合は開発モードを維持します。
4. **迅速な相談**: 特定のデータ項目（例：アイコンのファイル名）の特定や、HTML解析に苦戦した場合は、一人で長時間悩み続けず、**即座にユーザーに確認**してください。

## メンテナンスと管理
これらのツールと生成されたデータは `.gitignore` により Git 管理から除外されています。
パブリックリポジトリに誤って個人利用目的のデータやスクリプトを混入させないよう注意してください。

---

※このルールは、公式サイトへのスパム的なアクセスを防止し、かつ開発効率を最大化することを目的としています。
