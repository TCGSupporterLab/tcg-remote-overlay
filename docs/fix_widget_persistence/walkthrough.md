# 修正内容の確認：ウィジェット設定およびステートの永続化の修正

## 修正の概要
アプリケーション再起動時に一部の設定がリセットされる問題を修正するため、ステート管理の初期化処理を改善しました。

## 主な変更点

### 1. `useWidgetStore.ts` の初期化処理の堅牢化
- `getInitialState` において、`localStorage` からの復元時にデフォルト設定とのマージを確実に実施するように変更しました。
- ライフポイント（LP）のプレイヤー選択設定（`onlyShowPlayer1`）や、カード表示モード（`cardMode`）などの設定が、再起動後も正しく引き継がれるようになりました。
- **LPのターゲット（Player 1 or 2）の選択状態**が `localStorage` に保存され、再起動後も維持されるようになりました。
- SPマーカーの一時非表示（Oキー2回押し）のみを再起動時にリセットし、その他の可視性（SPマーカーそのものを有効にしているか等）は維持するように修正しました。

### 2. 不要なステートの削除
- ストア内に定義されていたが使用されていなかった `pinnedCardIds` を削除しました（現在は `useCardSearch.ts` 側の永続化機能を使用しているため）。

### 3. リセット機能の強化
- `fullReset`（R長押し、または共通設定のリセットボタン）を実行した際、**LPのターゲット選択が Player 1 に戻る**ように修正しました。

## 動作確認結果
- [x] LPの「Player 1のみ表示」を有効にした状態でリロードし、設定が維持されていることを確認。
- [x] カードを表示モードを「シンプル」に変更した状態でリロードし、設定が維持されていることを確認。
- [x] SPマーカーを表示中にOキー2回押しで一時非表示にし、リロード後にマーカーが「表示」に戻ることを確認。
- [x] 上記リロード後も、SPマーカーの表裏設定（front/back）は維持されていることを確認。
- [x] LPで Player 2 を選択した状態でリロードし、Player 2 が選択されたままになっていることを確認。
- [x] Rキー長押しで、LPの選択が Player 1 にリセットされることを確認。
