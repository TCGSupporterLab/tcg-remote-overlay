# 実装計画: ゲームモード廃止とマイレイアウトへの移行

## 1. 目的
- ハードコードされた「遊戯王モード」「ホロライブモード」を廃止。
- 代わりに「マイレイアウト」を使用して、ユーザーが自分好みのウィジェット配置や設定を保存・呼び出しできるようにする。
- コードベースから特定のゲームタイトルへの依存を可能な限り排除し、汎用的なTCGツールとしての基盤を強化する。

## 2. 変更内容
### 状態管理 (`useWidgetStore.ts`)
- `activePreset` (yugioh/hololive) を削除。
- 映像設定の初期値 `initialLP` を確実に保持。
- `DisplayPreset` 型定義の削除。

### 画面制御 (`App.tsx`)
- `activePreset` に依存していたロジック（Alt+1, Alt+2 ショートカット等）を削除。
- テンキー `.`（ドット）の挙動を一般化（常にダイス/素早く2回でコイン）。
- `O` キーの挙動を拡張：1回押しでSPマーカー反転、素早く2回押しで一時非表示切り替え（再起動時に解除されるよう変更）。
- `dotTimerRef` などの Timer 型を `undefined` に統一し、Lintエラーを解消。
- 不要な重複プロップ（`onOpenSaveDialog`）の削除。

### 設定UI (`SettingsMenu.tsx`, `WidgetsTab.tsx`, `WidgetSections.tsx`)
- 「専用ウィジェット」カテゴリ内で、`YugiohSection` と `HololiveSection` コンポーネントを使用し、元のデザインと階層構造を復元。
- 各ゲームセクションは `RectangleVertical` アイコンと固有のカラースキーマ（遊戯王: Blue, ホロライブ: Cyan）を保持。
- 内部の設定（ライフ設定、SPマーカー設定）も元のネスト構造に戻しました。

### ドキュメント & アセット
- `docs/system_specifications/` 内のファイル名からゲーム名を削除。
  - `hololive_toolset.md` -> `card_and_sp_marker.md`
  - `yugioh_toolset.md` -> `lp_calculator_widget.md`
- デフォルトレイアウト設定は、各ゲームの「おすすめ設定」として機能するため、元のファイル名（遊戯王OCG_layout.json, ホロライブOCG_layout.json）およびレイアウト名（遊戯王OCG, ホロライブOCG）を維持しました。

## 3. 影響範囲
- 既存のユーザー設定は `activePreset` がなくなることで一部リセットされる可能性があるが、マイレイアウト機能で補完可能。
- ショートカットキーの一部（Alt+1, 2）が利用不可になる。

## 4. 検証項目
- [ ] 起動時にエラーが出ないこと（Lintエラーの解消確認）。
- [ ] テンキー `.` でダイスが振れること、2回押しでコインが出ること。
- [ ] 設定メニューから「ライフ設定」「SPマーカー設定」が正しく操作できること。
- [ ] マイレイアウトの保存・適用が従来通り動作すること。
- [ ] `GuideTab` の内容が最新の仕様（ショートカット削除等）と一致していること。
