# メタデータ連動型の動的フィルタの実装

メタデータに含まれる任意のキー（「タイプ」「色」など）を自動的に検知し、カード検索画面のフィルタタブおよび選択肢として動的に生成します。

## ユーザーレビューが必要な項目
> [!IMPORTANT]
> - メタデータのキー名（例：「タイプ」「Bloom」）がそのままタブ名として表示されます。
> - `name` や `yomi`（読み）などの検索用フィールドは、フィルタタブからは自動的に除外されます。

## 変更内容

### フロントエンド

#### [MODIFY]- **[useCardSearch.ts](file:///f:/dev/github/tcg-remote-overlay/src/hooks/useCardSearch.ts)**:
  - `FilterCategory` を固定の文字列リテラルから `string` に変更し、動的なカテゴリに対応します。
  - `Filters` インターフェースを `Record<string, string[]>` ベースに変更します。
  - `dynamicFilterOptions` の生成ロジックを更新し、全カードのメタデータから「フィルタ候補となるキー」を自動抽出します。
  - `dynamicFilterOptions` の除外リストに `color` と `cardType` を追加し、メタデータの日本語キー（色、タイプ）のみが抽出されるように修正。
  - フィルタリングロジックを、全ての動的カテゴリに対してループで適用するように修正します。

#### [MODIFY]- **[FilterPanel.tsx](file:///f:/dev/github/tcg-remote-overlay/src/components/CardSearch/FilterPanel.tsx)**:
  - ハードコードされているタブ生成コード（「色」「タイプ」「Bloom」）を削除し、`useCardSearch` から渡される動的なリストに基づいてタブを生成します。
  - タブ名や選択肢のラベルに、メタデータのキー名・値をそのまま使用するように調整します。
  - ユーザー指示に基づき、動的タブ生成、および全タブへの「すべて」ボタン表示を正式な仕様として整理。

## 検証計画

### 自動テスト / 手動検証
- [ ] `metadata.json` に新しいキー（例：「レアリティ」) を追加し、検索画面に「レアリティ」タブが自動で出現することを確認する。
- [ ] 既存の「色」「タイプ」「Bloom」フィルタが正しく動作し続けることを確認する。
- [ ] 各タブで「すべて」を選択した場合や、複数選択した場合の挙動を確認する。
