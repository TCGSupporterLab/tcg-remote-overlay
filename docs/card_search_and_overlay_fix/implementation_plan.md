# 実装計画: オーバーレイ同期と多色検索の修正

## 1. 背景と目的
オーバーレイ画面（OBS用別窓）において、背景の切り替えやカード選択の反映が不安定であった問題、および一部のフィルタ（多色検索）が機能していなかった問題を根本から解決し、配信・対戦ツールとしての信頼性を高める。

## 2. 実装アプローチ

### 2.1. 通信基盤の安定化
- `BroadcastChannel` のインスタンスをコンポーネントのライフサイクル全体で維持するように変更。
- ステート更新のたびにチャンネルを再生成する処理を排除し、メッセージの取りこぼしを防ぐ。

### 2.2. ビジュアルデザインの調整
- **透過性の確保**: body だけでなく、その上に載っているコンテナ（.app-container等）やパネルの背景も `transparent` に切り替える CSS を追加。
- **視認性の維持**: 背景が透明や緑になってもライフの数字が埋もれないよう、カード内に 85% 不透明度のダーク背景を適用。
- **デザインの復元**: GB モード時にもネオン風の発光エフェクトが維持されるよう、`DigitalDisplay.tsx` の条件分岐を外す。

### 2.3. 検索ロジックの修正
- **色判定の厳密化**: 文字列の長さ（`length`）を直接チェックすることで、「単色 = 1文字」「多色 = 2文字以上」を確実に定義。
- **除外設定**: 対戦中に不要な「エール」カードを検索結果から自動的に除外。

## 3. リスク管理
- **操作画面への影響**: `isOverlayMode` (URLパラメータ) による厳格なガードをかけ、操作画面の色が変わってしまう「意図しない波及」を完全に防止する。
