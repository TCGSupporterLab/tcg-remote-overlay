# ZIP検出モーダルのレスポンス向上

## 現状の課題
- 大きなZIPファイルをドロップすると、解析が特定のデータ構造（ストリーミング形式）に依存して失敗し、「invalid zip data」エラーが発生する場合があった。
- 解析中にUIがフリーズし、アニメーション（pulseやspin）が表示されない。
- Tailwindの標準アニメーションが環境により適用されていない。

## 修正内容
1. **即時表示の実装**: 
   - ZIPをドロップした瞬間に確認モーダルを表示するように変更。
  - `fflate.unzip` の `filter` オプションを使用。全展開を行わずにヘッダーのみを高速に読み取るように変更。
  - ストリーミング形式から静的バッファ形式に戻し、安定性を向上（「invalid zip data」バグを修正）。
  - 解析を非同期（コールバック）で行うことでメインスレッドのブロックを最小限に。
3. **UI/CSSの強化**:
  - `index.css` に直接 `animate-spin` と `animate-pulse` を定義。
  - `App.tsx` のモーダル内に解析中であることを示すアニメーションを確実に追加。
4. **動的ガイダンス**:
  - `fileCount` が `0` の間は「システムによる安全確認を待機中...」と表示し、Windowsのセキュリティスキャンを匂わせる。
  - 同時に、高速化のための「ブロック解除」に関するヒントを表示。
5. **動的カウンタ**:
   - 解析中に見つかったカード枚数をリアルタイムで画面に反映。
4. **UIの調整**:
   - 解析中であることを示すアニメーション（パルスエフェクト・スピンアイコン）を追加。
   - 解析完了まで「開始」ボタンを無効化し、誤操作を防止。

## 影響範囲
- `useLocalCards.ts`: 解析関数のロジックとインターフェースの変更。
- `App.tsx`: モーダル表示タイミングとUI状態管理の変更。
