# 実装計画: ひらがな検索エンジンの構築

## 1. 辞書システムの設計
- **データ構造**: `src/data/kana-dictionary.json`
  - Key: カードに現れる元の単語（漢字・英語）
  - Value: ひらがな読み
- **フィルタリング方針**:
  - ひらがな・カタカナのみのKeyは、アプリ側の正規化ロジックで対応可能なため辞書には含めない。
  - 最長一致に近い挙動をさせるため、適用時はKeyの長さ順にマッチさせる。

## 2. データエンリッチメント
- **生成ロジック**:
  - カードの `name`, `tags`, `expansion`, `cardType` を結合して対象テキストを作成。
  - 辞書の全Keyを走査し、含まれている単語の読み（Value）をすべて抽出し、カードデータの `kana` フィールドに格納。
- **実行タイミング**:
  - 新規スクレイピング時（`scripts/fetch-hololive-data.js`）
  - 手動メンテナンス時（`scripts/enrich-cards.js`）

## 3. 検索ロジックの統合
- **ターゲット**: `src/hooks/useCardSearch.ts`
- **変更点**:
  - 検索用の結合テキスト `_joinedText` に `card.kana` を追加。
  - キーワード検索時に、正規化された入力がこのテキストに含まれるかを判定。

## 4. カラーフィルタの厳格化
- **Multi-color**: `color.length >= 2`
- **Single-color (not_multi)**: `color.length === 1`
  - これにより、エール（無色）やイベントカード（色なし）を明確に除外。
