# 修正内容の確認 (Walkthrough): カードウィジェットの独立化

## 実施した変更
カードウィジェットの抽出と、ホロライブモードに依存しない表示ロジックへの移行を完了しました。

### 1. カードウィジェットの新規実装
- `src/components/CardSearch/CardWidget.tsx` を新規作成しました。
- このウィジェットはカード画像のみを表示し、テキスト表示やダイスなどは含みません。
- アスペクト比やアニメーションは従来のホロライブウィジェットの動作を維持しています。

### 2. カード検索フックのクリーンアップ
- `src/hooks/useCardSearch.ts` から `overlayDisplayMode` (画像/テキスト切替) を削除し、常に画像を表示するシンプルな構造に変更しました。
- `setOverlayDisplayMode` や `toggleOverlayDisplayMode` メソッドも削除しました。

### 3. ホロライブツールの簡略化
- `src/components/HololiveTools.tsx` を修正し、オーバーレイ表示時にはダイスとコインのみをレンダリングするよう変更しました。
- これにより、「カードウィジェット」と「ダイス（ホロカツール）」を画面上の別々の場所に配置できるようになりました。

### 4. キャッシュ管理と動的な表示ロジック
- **3種類のキャッシュ管理**: 「拡大表示カード」「ピン留めリスト」「表示番号 (No)」を永続化（IndexedDB）し、ウィンドウ間で完全に同期させました。
- **インテリジェントな表示優先順位**: 
  1. `displayCardNo` (Shift+1～0) が指定されている場合、ピン留めリストの該当番号を表示。
  2. `displayCardNo` が 0 または範囲外の場合、設定画面で最後に選択したカードを表示。
- **多桁ショートカットの実装**: `Shift + 数字キー` を素早く叩くことで、10番以降のカードも即座に切り替え可能です（200msウィンドウ）。

### 5. 操作案内（ガイダンス）の刷新
- カード未選択時には、設定メニュー（Esc/右クリック > ウィジェット > カードを表示）への経路を視覚的なステップ形式で表示するようにしました。
- 改行位置やインデントを調整し、画面が小さくても迷わずセットアップ手順を確認できます。

### 6. ショートカットの競合回避と安定化
- 遊戯王モードのLP入力との競合を避けるため、`Shift + 数字キー` で表示Noを切り替えます。
- ステート更新時にタイマーが不適切にリセットされる問題を修正し、安定した連続入力を実現しました。

## 確認方法
1.  **設定メニューの「Widgets」タブ** で「カードを表示」をONにします。
2.  カードリストからカードを選択（またはピン留めカードを数字キーで選択）すると、画面中央付近にカード画像が表示されます。
3.  カード画像をホバーして表示されるハンドルで、移動、拡大縮小、回転ができることを確認してください。
4.  **「基本設定」** で「遊戯王」や「ホロカ」を選択しても、カード画像が消えずに表示され続け、かつそれぞれのツール（LP計、ダイス）と個別に共存できることを確認してください。
