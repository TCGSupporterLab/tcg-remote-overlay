# 修正内容の確認 (Walkthrough): カードウィジェットの独立化

## 実施した変更
カードウィジェットの抽出と、ホロライブモードに依存しない表示ロジックへの移行を完了しました。

### 1. カードウィジェットの新規実装
- `src/components/CardSearch/CardWidget.tsx` を新規作成しました。
- このウィジェットはカード画像のみを表示し、テキスト表示やダイスなどは含みません。
- アスペクト比やアニメーションは従来のホロライブウィジェットの動作を維持しています。

### 2. カード検索フックのクリーンアップ
- `src/hooks/useCardSearch.ts` から `overlayDisplayMode` (画像/テキスト切替) を削除し、常に画像を表示するシンプルな構造に変更しました。
- `setOverlayDisplayMode` や `toggleOverlayDisplayMode` メソッドも削除しました。

### 3. ホロライブツールの簡略化
- `src/components/HololiveTools.tsx` を修正し、オーバーレイ表示時にはダイスとコインのみをレンダリングするよう変更しました。
- これにより、「カードウィジェット」と「ダイス（ホロカツール）」を画面上の別々の場所に配置できるようになりました。

### 4. キャッシュ管理と動的な表示ロジック
- **3種類のキャッシュ管理**: 「拡大表示カード」「ピン留めリスト」「表示番号 (No)」を永続化（IndexedDB/SharedState）しました。
- **表示番号 (No) の切り替え**: `Shift + 0〜9` キーで表示対象を瞬時に切り替えられます。
  - `0`: カード検索画面の拡大エリア（selectedCard）を表示
  - `1〜n`: ピン留めされたカードを順番に表示
  - **対象不在時の挙動**: `n` がピン留め数を超えている場合は、操作ガイドを表示するようにしました。これにより、誤った番号を選択していることがユーザーに伝わりやすくなります。
- **自動フォールバック**: ピン留めが0枚の場合は、Noに関わらず拡大エリアのカードを表示しようとします。

### 5. 操作案内（ガイダンス）の追加
- 初回起動時やカード未選択時、またはフォルダ接続が切れている場合に、ウィジェット内に具体的な操作手順を表示するようにしました。
- 文言: 「表示するカードが選択されていません。 設定 (Esc / 右クリック) ＞ ウィジェット ＞ カードを表示 ∨ から画像フォルダに接続し、カードを選択してください。」

### 6. ショートカットの競合回避
- 遊戯王モードのLP入力との重なりを避けるため、数字キー単体ではなく `Shift + 数字キー` で表示Noを切り替えるように統一しました。

## 確認方法
1.  **設定メニューの「Widgets」タブ** で「カードを表示」をONにします。
2.  カードリストからカードを選択（またはピン留めカードを数字キーで選択）すると、画面中央付近にカード画像が表示されます。
3.  カード画像をホバーして表示されるハンドルで、移動、拡大縮小、回転ができることを確認してください。
4.  **「基本設定」** で「遊戯王」や「ホロカ」を選択しても、カード画像が消えずに表示され続け、かつそれぞれのツール（LP計、ダイス）と個別に共存できることを確認してください。
