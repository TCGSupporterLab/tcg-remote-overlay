# オーバEレイ・カードテキスト表示機E 実裁E亁E

オーバEレイ画面にカードE画像だけでなく、詳細なチEスト情報を表示できる機Eを実裁Eました。これにより、画像が読みづらい場合や特定E効果テキストを強調したぁE合に対応可能となります、E

## 変更冁E

### 1. 状態管琁EE拡張 ([useCardSearch.ts](file:///f:/dev/github/tcg-remote-overlay/src/hooks/useCardSearch.ts))
- **詳細フィールドE追加**: スクレイパEで抽出した `oshiSkills`, `arts`, `keywords`, `abilityText` 等を `Card` 型に追加しました、E
- **表示モードE状態追加**: `overlayDisplayMode` (`'image'` | `'text'`) を導Eしました、E
- **窓間同期**: `BroadcastChannel` を拡張し、コントローラーでの刁E替えがオーバEレイ窓に即座に反映されるよぁEしました、E

### 2. コントローラー UI ([DisplayModeBadge.tsx](file:///f:/dev/github/tcg-remote-overlay/src/components/CardSearch/DisplayModeBadge.tsx))
- オーバEレイバッジの隣に、表示モードを刁E替えるボタンを追加しました、E
- **直感的なUI**: アイコンが「現在の表示状態」を示すよぁE設計されておりE画像モード時は画像アイコン、テキストモード時はチEストアイコンE、クリチEで他方のモードへ刁E替わります、E
- [SearchContainer.tsx](file:///f:/dev/github/tcg-remote-overlay/src/components/CardSearch/CardSearchContainer.tsx) に統合しました、E

### 3. オーバEレイ描画ロジチE ([HololiveTools.tsx](file:///f:/dev/github/tcg-remote-overlay/src/components/HololiveTools.tsx))
- チEストモード時の専用レイアウトを実裁EましたEE
    - **ヘッダーレイアウトE最適匁E*: 
        - カードIDおよび属性E色EEチEスト表示を削除し、情報のスリム化を図りました、E
        - **表示惁Eの洗練**:
            - **Extra斁Eサイズの統一**: カード最下部の注記！ExtraEセクションの斁Eサイズを、E常のチEストと同じ `text-xs` に引き上げ、視認性を向上させました、E
            - **LIMITED重褁EE除去**: 能力説明欁EEbilityTextEE先頭に「LIMITED」とぁE斁Eが残ってぁE場合、それを自動的に非表示にする処琁E追加しました。これにより、下部の専用LIMITEDラベルとの重褁E避け、よりクリーンな表示を実現しました、E
            - **タグの表示**: カード枠の最下部左側に、カードに設定されてぁEタグEE#EN`, `#Justice` 等）を青色のハッシュタグ形式で表示するようにしました、E
        - **用語E修正**: 推しスキルの「コスト」表記を、E式用語に合わせて、E*ホロパワー**」に変更しました、E
        - **サポEトカードE表記E簡略匁E*: カードタイプから「サポEトE」や「LIMITED」を削除し、E*「アイチE」「イベント」などのカチEリのみ**を表示するようにしました、E
        - **LIMITED表示の最適匁E*: 種別欁Eら「LIMITED」を削除する代わりに、カード最下部のExtraセクションEEロメンの注記と同じ場所Eに、E*LIMITED: ターンに1枚しかつかえなぁE*」と明示皁E表示するようにしました、E
        - **表示惁Eの雁EE*: 重褁EてぁEBloomレベルの小型バッジを削除し、大型化されたEチEー上部のラベルEEtext-xl`Eに惁Eを集紁Eることで、ノイズを減らしつつ視認性を最大化しました、E
        - **大斁E変換の解除**: ヘッダーラベルの `uppercase` 持Eを削除し、`Debut`, `1st` 等E混合表記を維持するよぁEしました、E
        - **ホロメンの表記変更**: 「Eロメン」とぁE共通E種別表記を廁Eし、E*Bloomレベル (Debut/1st/2nd)** を直接表示するようにしました、EuzzカードE場合E、レベルの後に **" Buzz"** がE動的に付与されます、E
        - **カラーコーチEング (強匁E**: CSSクラスの競合を防ぐため、カード名の斁E色めE*インラインスタイル (`style={{ color: textColor }}`)** で直接持EするよぁE強化しました、E
        - **判定ロジチEの改喁E*: 単純な完E一致ではなく、多色カードやチEEタの微細なめEにも対応できるよう `includes` による部刁E致判定を採用しました、E
        - **クロマキー配E**: 緑色属性につぁEは、引き続きエメラルドグリーンを採用し、視認性を確保してぁEす、E
        - カードタイプ（Eロメン、サポEト等）を名前の左上に配置し、より直感的にカードE種類を把握できるようにしました、E
    - 名前、HP/❤、タイプ、色、ブルームレベルの表示、E
    - **推しスキル**: 推しEロメン専用の青Eースのセクション、E
    - **アーチE*: コストアイコン、ダメージ、特効、テキストを含む赤ベEスのセクション、E
    - **キーワードE劁E*: 黁Eで強調されたE力説明、E
    - **能力テキスチE*: サポEトカード等、E
- **反転表示の対忁E*: バッジで 180 度回転を選択してぁE場合、テキスト表示も連動して回転します、E

## 検証結果

### 動作確誁E
1.  **モードEり替ぁE*: コントローラーのトグルボタンで、オーバEレイの画像とチEストが即座に刁E替わることを確認しました、E
2.  **同期**: 褁Eのウィンドウを開ぁE状態でも、状態（画僁EチEスト、およE回転Eが正しく同期されます、E
3.  **チEインの洗練E角丸・白エチE・サイズ固定！E*: 
    - カード枠の角丸めE`3xl` (24px) に強化し、白ぁEチEを追加して視認性を向上させました、E
    - **サイズ固定化**: チEスト量めE像EチEストE刁E替えにかかわらず、枠のサイズめE`350px x 520px` に完Eに固定しました。これにより、カードを刁E替えた際E外枠のガタつきを無くし、安定したレイアウトを実現しました、E
4.  **回転**: `rotated` モード時、テキストEースのレイアウトも正しく 180 度回転して表示されます、E
5.  **カード種別ごとの表示**:
    - **推しEロメン**: HP表記が `❤` になり、スキルが正しく表示されること、E
    - **ホロメン**: HP表記が `HP` のままで、アーチEストやダメージが正しく表示されること、E
    - **サポEトカーチE*: 能力テキストが表示されること、E

---

[ホロライブツールセチE仕様書](file:///f:/dev/github/tcg-remote-overlay/docs/system_specifications/features/hololive_toolset.md)


