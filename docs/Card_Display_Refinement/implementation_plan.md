# 実装計画: カード表示とキャッシュ管理の改善

## 1. 目的
- `deck_example` などのリンクのみを含むフォルダが表示されない問題を解消する。
- 異なるフォルダへ移動した際に、前のフォルダのピン留めカードなどが混ざる不具合を修正する。
- ファイルシステムの大文字小文字を正しく扱い、メタデータの紐付けミスを防ぐ。

## 2. 修正対象ファイル
- `src/hooks/useCardSearch.ts`
- `src/hooks/useLocalCards.ts`

## 3. 解決策
### A. 検索フィルタの調整
- キーワード検索がない「フォルダブラウズ」状態では、リンクされたカードも「そのフォルダに存在するカード」として計上する。
- キーワード検索時は、これまで通り重複を避けるためにリンクカードを隠す。

### B. 初期化ロジックの追加
- `restoreFolderCache` が `false`（キャッシュなし）を返す際、`setPinnedCards([])` などのリセットコールを確実に実行する。

### C. パス正規化の廃止
- `toLowerCase()` による全パスの小文字化を廃止。拡張子チェックのみ小文字で行い、データキーはオリジナルのケースを保持する。
- リンク解決時の検索を `path === targetPath` の厳密比較にする。

## 4. 期待される結果
- テンプレートのサンプルフォルダが正しく表示される。
- 新しいプロジェクトフォルダを開いた時、画面がクリーンな状態から始まる。
- ファイル名の大文字小文字を使い分けていても、正しくメタデータ（名前や読み）が表示される。
