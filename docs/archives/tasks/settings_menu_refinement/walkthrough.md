# 設定メニューの操作性向上 (右クリック・一本化) 完了

右クリックによる設定画面の開閉ロジックを全面的に見直し、より確実な動作に改善しました。

## 修正内容

**1. ロジックの集約 (App.tsx)**
- これまでは `App.tsx` (開く) と `SettingsMenu.tsx` (閉じる) の両方にリスナーがあり、競合が発生していました。
- **一本化:** すべての右クリック制御を `App.tsx` のグローバルリスナーに集約しました。
- **挙動の確定:**
    - 設定が **閉じている** 時：右クリックで **開く**
    - 設定が **開いている** 時：ボタン等のない場所を右クリックで **閉じる**

**2. 判定ロジックの強化**
- `closest()` メソッドを使用し、ボタン、リンク、入力欄、ショートカットキー（kbdタグ）などの上では閉じないように正確に判定します。

**3. SettingsMenu.tsx のクリーンアップ**
- 不要になった重複ロジックを削除し、コンポーネントを軽量化しました。

## 動作確認 (Verification)
- `App.tsx` の `useEffect` 内で `showSettings` の状態が正しく監視され、リスナーが常に最新の状態を参照していることを確認しました。
- これにより、二重にイベントが走って画面が一瞬閉じてすぐ開くような問題も解消されています。
