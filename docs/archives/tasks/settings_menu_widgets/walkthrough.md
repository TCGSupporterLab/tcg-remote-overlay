# 修正内容の確認 (Walkthrough): 設定メニューのウィジェット設定

ウィジェット設定の完全な実装により、ユーザーは柔軟にオーバーレイをカスタマイズできるようになりました。

## 変更のポイント

### 1. グローバル同期の実現
- ウィジェットの表示設定（ダイス、コイン、LP、カード情報）をすべて `useCardSearch` の共有ステートに統合しました。
- これにより、**検索ウィンドウ（別タブ形式）で切り替えたトグルが、メインのオーバーレイ画面にもリアルタイムで反映**されます。

### 2. 永続性の確保
- `idb-keyval` を使用し、ウィジェットの設定をブラウザに保存するようにしました。
- ページをリロードしても、直前の設定（ダイスを表示するかどうか等）が保持されます。

### 3. 遊戯王計算機の細かな制御
- ライフポイントウィジェットに「初期ライフポイント」設定を導入しました。
- 「履歴の表示」トグルを追加し、計算ログが不要な場合に非表示にできるようになりました。
- ウィジェットそのものを非表示に設定した場合、計算機パネルとログ表示も適切に隠れます。

### 4. コンポーネントの柔軟性向上
- `OverlayDisplay` が `showDice` フラグをサポートし、ゲームモードに関わらずダイス単体での表示・非表示が可能になりました。
- `HololiveTools` でもダイスとコインの表示・非表示フラグを尊重するように修正しました（ホロライブではデフォルトでコインが非表示になっています）。

## 検証方法
1. 設定メニューの「ウィジェット」タブを開きます。
2. 「ダイスを表示」「コインを表示」などのトグルを操作し、背後のオーバーレイからウィジェットが消える/現れることを確認します。
3. ライフポイントの「履歴の表示」をオフにして、計算機下のログが消えることを確認します。
4. ページをリロードし、設定が維持されていることを確認します。
5. （別ウィンドウで検索画面を開いている場合）検索画面での設定変更がメイン画面に反映されることを確認します。
